# HeartBeat Tracker - Render.com Deployment

This project is configured for deployment on Render.com with the following changes:

## Files Added/Modified

### 1. `render.yaml` - Render Configuration
- Configures web service with Python 3.11
- Uses external Supabase PostgreSQL database
- Defines environment variables including Supabase DATABASE_URL
- Configures health check endpoint
- Uses direct uvicorn start command for production

### 2. `requirements.txt` - Updated Dependencies
- Added `psycopg2-binary==2.9.9` for PostgreSQL support

### 3. `app/database.py` - Database Configuration
- Updated to support both SQLite (local) and PostgreSQL (production)
- Uses `DATABASE_URL` environment variable to determine database type

### 4. `.env.example` - Environment Variables Template
- Template for required environment variables
- Includes database URL configuration options

### 5. `run.py` - Production Configuration
- Changed default `RELOAD` to `false` for production
- Maintains compatibility with local development

### 6. `app/main.py` - Health Check Endpoint
- Added `/health` endpoint for Render monitoring

## Deployment Steps

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Configure for Render.com deployment"
   git push origin main
   ```

2. **Deploy on Render**
   - Go to render.com
   - Connect your GitHub repository: https://github.com/farajallah/HeartBeat.git
   - Render will automatically detect the `render.yaml` file
   - The service will be deployed using external Supabase database

3. **Environment Variables**
   - `DATABASE_URL` is pre-configured for Supabase PostgreSQL
   - `BEARER_TOKEN` will be auto-generated by Render
   - Other variables are configured in `render.yaml`

## Local Development

For local development with SQLite:
```bash
cp .env.example .env
# Edit .env to use SQLite DATABASE_URL
python run.py
```

## Production URLs

After deployment, your app will be available at:
- Main App: `https://heartbeat-tracker.onrender.com`
- Dashboard: `https://heartbeat-tracker.onrender.com/dashboard`
- Health Check: `https://heartbeat-tracker.onrender.com/health`

## Database Migration

The app automatically creates tables on startup. The database configuration handles both SQLite and PostgreSQL seamlessly.

## Database Configuration

The app uses Supabase PostgreSQL database for production:
- Database URL is pre-configured in `render.yaml`
- Tables are automatically created on startup
- Supports both SQLite (local) and Supabase PostgreSQL (production)
- No need for managed database service on Render

## Local Development with Supabase

For local development using the same Supabase database:
```bash
cp .env.example .env
# Edit .env to use Supabase DATABASE_URL
DATABASE_URL=postgresql://postgres:rwJ9wv11U0TCiiLV@db.aicsiyrgrtxafgljghcc.supabase.co:5432/postgres
python run.py
```
